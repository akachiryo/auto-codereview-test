# テーブル設計書

イマココSNSのデータベース設計書です。

*最終更新: 2025-08-21 17:23:52*

## Users

**役割**: ユーザー情報を保持する

| # | 論理名 | 物理名 | データ型 | 長さ | NOT NULL | PK | FK | 備考 |
|---|--------|--------|----------|------|----------|----|----|------|
| 1 | ID | id | int | 11 | ✓ | ✓ |  |  |
| 2 | メール | email | varchar | 255 | ✓ |  |  |  |
| 3 | パスワード | password_digest | varchar | 255 | ✓ |  |  | ライブラリ依存 |
| 4 | パスワード再発行トークン | reset_digest | varchar | 255 |  |  |  | ライブラリ依存 |
| 5 | フルネーム | name | varchar | 255 | ✓ |  |  |  |
| 6 | ユーザーネーム | user_name | varchar | 255 | ✓ |  |  |  |
| 8 | アイコン | profile_picture_path | varchar | 255 |  |  |  |  |
| 9 | サムネイル | thumbnail_path | varchar | 255 |  |  |  |  |
| 10 | 自己紹介 | description | text |  |  |  |  |  |
| 11 | 削除日 | discarded_at | datetime |  |  |  |  | 論理削除 |
| 12 | 作成日時 | created_at | datetime |  |  |  |  |  |
| 13 | 更新日時 | updated_at | datetime |  |  |  |  |  |

## Posts

**役割**: 投稿情報を保持する

| # | 論理名 | 物理名 | データ型 | 長さ | NOT NULL | PK | FK | 備考 |
|---|--------|--------|----------|------|----------|----|----|------|
| 1 | ID | id | int | 11 | ✓ | ✓ |  |  |
| 2 | ユーザーID | user_id | int | 11 | ✓ |  | ✓ |  |
| 3 | 内容 | body | text |  | ✓ |  |  |  |
| 4 | 緯度 | latitude | float |  | ✓ |  |  | geolocation API活用想定
投稿ボタンが押されたタイミングで現在地を取得し、座標を保存 |
| 5 | 経度 | longitude | float |  | ✓ |  |  | geolocation API活用想定
投稿ボタンが押されたタイミングで現在地を取得し、座標を保存 |
| 6 | 削除日 | discarded_at | datetime |  |  |  |  | 論理削除 |
| 7 | 作成日時 | created_at | datetime |  |  |  |  |  |
| 8 | 更新日時 | updated_at | datetime |  |  |  |  |  |

## Comments

**役割**: スレッド情報を保持する

| # | 論理名 | 物理名 | データ型 | 長さ | NOT NULL | PK | FK | 備考 |
|---|--------|--------|----------|------|----------|----|----|------|
| 1 | ID | id | int | 11 | ✓ | ✓ |  |  |
| 2 | 投稿ID | post_id | int | 11 | ✓ |  | ✓ |  |
| 3 | ユーザーID | user_id | int | 11 | ✓ |  | ✓ |  |
| 4 | 親スレッドID | parent_id | int | 11 |  |  |  | スレッドへの返信の場合のみ使用する |
| 5 | 内容 | body | text |  |  |  |  |  |
| 6 | 削除日 | discarded_at | datetime |  |  |  |  | 論理削除 |
| 7 | 作成日時 | created_at | datetime |  |  |  |  |  |
| 8 | 更新日時 | updated_at | datetime |  |  |  |  |  |

## Likes

**役割**: いいね情報を保持する

| # | 論理名 | 物理名 | データ型 | 長さ | NOT NULL | PK | FK | 備考 |
|---|--------|--------|----------|------|----------|----|----|------|
| 1 | ID | id | int | 11 | ✓ | ✓ |  |  |
| 2 | ユーザID | user_id | int | 11 | ✓ |  | ✓ |  |
| 3 | 投稿ID | post_id | int | 11 |  |  | ✓ |  |
| 4 | スレッドID | thread_id | int | 11 |  |  | ✓ |  |
| 5 | 削除日 | discarded_at | datetime |  |  |  |  | 論理削除 |
| 6 | 作成日時 | created_at | datetime |  |  |  |  |  |
| 7 | 更新日時 | updated_at | datetime |  |  |  |  |  |

## Follows

**役割**: フォロー情報を保持する

| # | 論理名 | 物理名 | データ型 | 長さ | NOT NULL | PK | FK | 備考 |
|---|--------|--------|----------|------|----------|----|----|------|
| 1 | フォローID | following_id | int | 11 | ✓ |  | ✓ | フォローされるユーザーID |
| 2 | フォロワーID | follower_id | int | 11 | ✓ |  | ✓ | フォローするユーザーID |
| 3 | 削除日 | discarded_at | datetime |  |  |  |  | 論理削除 |
| 4 | 作成日時 | created_at | datetime |  |  |  |  |  |
| 5 | 更新日時 | updated_at | datetime |  |  |  |  |  |

